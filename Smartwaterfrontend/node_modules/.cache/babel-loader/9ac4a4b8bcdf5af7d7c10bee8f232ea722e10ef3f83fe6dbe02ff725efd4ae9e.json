{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api/api';import dayjs from'dayjs';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LatestReadingCard(){var _latest$distance_tank,_latest$distance_pers;const[latest,setLatest]=useState(null);const load=async()=>{try{const r=await api.get('/api/reads/latest');setLatest(r.data);}catch(err){console.error('latest reading error',err);}};useEffect(()=>{load();const t=setInterval(load,15000);return()=>clearInterval(t);},[]);if(!latest){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Latest Reading\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Latest Reading\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time:\"}),\" \",dayjs(latest.created_at).format('YYYY-MM-DD HH:mm:ss')]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tank distance:\"}),\" \",(_latest$distance_tank=latest.distance_tank_cm)!==null&&_latest$distance_tank!==void 0?_latest$distance_tank:'—',\" cm\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tap distance:\"}),\" \",(_latest$distance_pers=latest.distance_person_cm)!==null&&_latest$distance_pers!==void 0?_latest$distance_pers:'—',\" cm\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Level:\"}),\" \",latest.water_level_cm?\"\".concat(latest.water_level_cm.toFixed(1),\" cm\"):'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Volume:\"}),\" \",latest.volume_liters?\"\".concat(latest.volume_liters.toFixed(1),\" L\"):'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Person present:\"}),\" \",latest.person_present==null?'—':latest.person_present?'Yes':'No']})]});}","map":{"version":3,"names":["React","useEffect","useState","api","dayjs","jsx","_jsx","jsxs","_jsxs","LatestReadingCard","_latest$distance_tank","_latest$distance_pers","latest","setLatest","load","r","get","data","err","console","error","t","setInterval","clearInterval","className","children","created_at","format","distance_tank_cm","distance_person_cm","water_level_cm","concat","toFixed","volume_liters","person_present"],"sources":["C:/smart-water-project/smartwaterfrontend/src/components/LatestReadingCard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api/api';\r\nimport dayjs from 'dayjs';\r\n\r\nexport default function LatestReadingCard(){\r\n  const [latest, setLatest] = useState(null);\r\n\r\n  const load = async () => {\r\n    try {\r\n      const r = await api.get('/api/reads/latest');\r\n      setLatest(r.data);\r\n    } catch (err) {\r\n      console.error('latest reading error', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    load();\r\n    const t = setInterval(load, 15000);\r\n    return () => clearInterval(t);\r\n  }, []);\r\n\r\n  if (!latest) {\r\n    return <div className=\"card\"><h2>Latest Reading</h2><div>Loading…</div></div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2>Latest Reading</h2>\r\n      <div><strong>Time:</strong> {dayjs(latest.created_at).format('YYYY-MM-DD HH:mm:ss')}</div>\r\n      <div><strong>Tank distance:</strong> {latest.distance_tank_cm ?? '—'} cm</div>\r\n      <div><strong>Tap distance:</strong> {latest.distance_person_cm ?? '—'} cm</div>\r\n      <div><strong>Level:</strong> {latest.water_level_cm ? `${latest.water_level_cm.toFixed(1)} cm` : '—'}</div>\r\n      <div><strong>Volume:</strong> {latest.volume_liters ? `${latest.volume_liters.toFixed(1)} L` : '—'}</div>\r\n      <div><strong>Person present:</strong> {latest.person_present == null ? '—' : latest.person_present ? 'Yes' : 'No'}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}