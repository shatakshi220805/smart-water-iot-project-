{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UsageSummary(){const[today,setToday]=useState(0);const[month,setMonth]=useState(0);const[currentVolume,setCurrentVolume]=useState(null);const[currentLevel,setCurrentLevel]=useState(null);async function load(){try{const[r1,r2,cur]=await Promise.all([api.get('/api/stats/usage',{params:{range:'today'}}),api.get('/api/stats/usage',{params:{range:'month'}}),api.get('/api/reads/latest')]);setToday(Number(r1.data.liters||0));setMonth(Number(r2.data.liters||0));if(cur.data){var _cur$data$volume_lite,_cur$data$water_level;setCurrentVolume((_cur$data$volume_lite=cur.data.volume_liters)!==null&&_cur$data$volume_lite!==void 0?_cur$data$volume_lite:null);setCurrentLevel((_cur$data$water_level=cur.data.water_level_cm)!==null&&_cur$data$water_level!==void 0?_cur$data$water_level:null);}}catch(err){console.error('UsageSummary load error',err);}}useEffect(()=>{load();const t=setInterval(load,15000);return()=>clearInterval(t);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Usage Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Today used\"}),/*#__PURE__*/_jsx(\"p\",{children:today?\"\".concat(today.toFixed(2),\" L\"):'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"This month\"}),/*#__PURE__*/_jsx(\"p\",{children:month?\"\".concat(month.toFixed(2),\" L\"):'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Current Volume\"}),/*#__PURE__*/_jsx(\"p\",{children:currentVolume?\"\".concat(currentVolume.toFixed(1),\" L\"):'—'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Current Level\"}),/*#__PURE__*/_jsx(\"p\",{children:currentLevel?\"\".concat(currentLevel.toFixed(1),\" cm\"):'—'})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","UsageSummary","today","setToday","month","setMonth","currentVolume","setCurrentVolume","currentLevel","setCurrentLevel","load","r1","r2","cur","Promise","all","get","params","range","Number","data","liters","_cur$data$volume_lite","_cur$data$water_level","volume_liters","water_level_cm","err","console","error","t","setInterval","clearInterval","className","children","concat","toFixed"],"sources":["C:/smart-water-project/smartwaterfrontend/src/components/UsageSummary.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api/api';\r\n\r\nexport default function UsageSummary() {\r\n  const [today, setToday] = useState(0);\r\n  const [month, setMonth] = useState(0);\r\n  const [currentVolume, setCurrentVolume] = useState(null);\r\n  const [currentLevel, setCurrentLevel] = useState(null);\r\n\r\n  async function load() {\r\n    try {\r\n      const [r1, r2, cur] = await Promise.all([\r\n        api.get('/api/stats/usage', { params: { range: 'today' } }),\r\n        api.get('/api/stats/usage', { params: { range: 'month' } }),\r\n        api.get('/api/reads/latest')\r\n      ]);\r\n      setToday(Number(r1.data.liters || 0));\r\n      setMonth(Number(r2.data.liters || 0));\r\n      if (cur.data) {\r\n        setCurrentVolume(cur.data.volume_liters ?? null);\r\n        setCurrentLevel(cur.data.water_level_cm ?? null);\r\n      }\r\n    } catch (err) {\r\n      console.error('UsageSummary load error', err);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    load();\r\n    const t = setInterval(load, 15000);\r\n    return () => clearInterval(t);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2>Usage Summary</h2>\r\n      <div className=\"summary-grid\">\r\n        <div>\r\n          <h3>Today used</h3>\r\n          <p>{today ? `${today.toFixed(2)} L` : '—'}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <h3>This month</h3>\r\n          <p>{month ? `${month.toFixed(2)} L` : '—'}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <h3>Current Volume</h3>\r\n          <p>{currentVolume ? `${currentVolume.toFixed(1)} L` : '—'}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <h3>Current Level</h3>\r\n          <p>{currentLevel ? `${currentLevel.toFixed(1)} cm` : '—'}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}